<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Hardware on Purplecarrot</title><link>https://purplecarrot.co.uk/tags/hardware/</link><description>Recent content in Hardware on Purplecarrot</description><generator>Hugo -- gohugo.io</generator><language>en-gb</language><lastBuildDate>Fri, 11 Oct 2013 16:43:00 +0100</lastBuildDate><atom:link href="https://purplecarrot.co.uk/tags/hardware/index.xml" rel="self" type="application/rss+xml"/><item><title>Configuring Out-Of-Band Management Interface from In-Band Server</title><link>https://purplecarrot.co.uk/2013/10/11/configuring-out-of-band-management/</link><pubDate>Fri, 11 Oct 2013 16:43:00 +0100</pubDate><guid>https://purplecarrot.co.uk/2013/10/11/configuring-out-of-band-management/</guid><description>
&lt;p>Most modern x86 servers include &lt;a href="http://en.wikipedia.org/wiki/Out-of-band_management">out-of-band&lt;/a> Management or Lights-out Management systems. These systems offer remote configuration and remote console access to a headless server normally located in a datacenter. These are typically used when first setting up a server, or perhaps when the server is hosed. The company I work for is large enough to have dedicated server operators, and in my role I rarely if ever need to access the consoles of real devices. However, I recently needed to get to the console of a device and the server was in a different continent and timezone and I couldn't access the IP address I'd been emailed :( Not a good start to the day. I remember using ipmitool to configure OOB management before, but of course I never wrote down what I did then. As this blog is really a note taking memory aid system, I'm writing it down for next time. So using ipmitool I was able to determine the IP address of the server.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="ln"> 1&lt;/span>ipmiserver# ipmitool -I open lan print &lt;span class="m">1&lt;/span>
&lt;span class="ln"> 2&lt;/span>Set in Progress : Set Complete
&lt;span class="ln"> 3&lt;/span>Auth Type Support : NONE MD2 MD5 PASSWORD
&lt;span class="ln"> 4&lt;/span>Auth Type Enable : Callback :
&lt;span class="ln"> 5&lt;/span> : User : MD2 MD5 PASSWORD
&lt;span class="ln"> 6&lt;/span> : Operator : MD2 MD5 PASSWORD
&lt;span class="ln"> 7&lt;/span> : Admin : MD5
&lt;span class="ln"> 8&lt;/span> : OEM :
&lt;span class="ln"> 9&lt;/span>IP Address Source : Static Address
&lt;span class="ln">10&lt;/span>IP Address : 192.168.1.1
&lt;span class="ln">11&lt;/span>Subnet Mask : 255.255.255.0
&lt;span class="ln">12&lt;/span>MAC Address : 00:00:00:00:00:00
&lt;span class="ln">13&lt;/span>SNMP Community String : public
&lt;span class="ln">14&lt;/span>IP Header : &lt;span class="nv">TTL&lt;/span>&lt;span class="o">=&lt;/span>0x40 &lt;span class="nv">Flags&lt;/span>&lt;span class="o">=&lt;/span>0x40 &lt;span class="nv">Precedence&lt;/span>&lt;span class="o">=&lt;/span>0x00 &lt;span class="nv">TOS&lt;/span>&lt;span class="o">=&lt;/span>0x10
&lt;span class="ln">15&lt;/span>BMC ARP Control : ARP Responses Enabled, Gratuitous ARP Disabled
&lt;span class="ln">16&lt;/span>Gratituous ARP Intrvl : 2.0 seconds
&lt;span class="ln">17&lt;/span>Default Gateway IP : 192.168.1.254
&lt;span class="ln">18&lt;/span>Default Gateway MAC : 00:00:00:00:00:00
&lt;span class="ln">19&lt;/span>Backup Gateway IP : 0.0.0.0
&lt;span class="ln">20&lt;/span>Backup Gateway MAC : 00:00:00:00:00:00
&lt;span class="ln">21&lt;/span>802.1q VLAN ID : Disabled
&lt;span class="ln">22&lt;/span>802.1q VLAN Priority : &lt;span class="m">0&lt;/span>
&lt;span class="ln">23&lt;/span>RMCP+ Cipher Suites : 0,1,2,3,4
&lt;span class="ln">24&lt;/span>Cipher Suite Priv Max : XaaaaXXXXXXXXXX
&lt;span class="ln">25&lt;/span> : &lt;span class="nv">X&lt;/span>&lt;span class="o">=&lt;/span>Cipher Suite Unused
&lt;span class="ln">26&lt;/span> : &lt;span class="nv">c&lt;/span>&lt;span class="o">=&lt;/span>CALLBACK
&lt;span class="ln">27&lt;/span> : &lt;span class="nv">u&lt;/span>&lt;span class="o">=&lt;/span>USER
&lt;span class="ln">28&lt;/span> : &lt;span class="nv">o&lt;/span>&lt;span class="o">=&lt;/span>OPERATOR
&lt;span class="ln">29&lt;/span> : &lt;span class="nv">a&lt;/span>&lt;span class="o">=&lt;/span>ADMIN
&lt;span class="ln">30&lt;/span> : &lt;span class="nv">O&lt;/span>&lt;span class="o">=&lt;/span>OEM
&lt;span class="ln">31&lt;/span>ipmiserver#
&lt;/code>&lt;/pre>&lt;/div>&lt;p>From this I noticed that the default gateway for the out-of-band was incorrect (as with all blog posts, the IPs are changed to RFC1918 private addresses here). What must have happen is that the server installation engineer had used a screen and keyboard on a trolley to configure the server, and then probably tested it from a device on the same subnet (I'm being generous here, as he/she may have never bothered testing it!) Anyway, quick man ipmitool for syntax and this was easily fixed from the in-band server with the following command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="ln">1&lt;/span>ipmitool -I open lan set 1 defgw ipaddr 192.168.1.1
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Determining the IP Address of a Server's Out of Band Management</title><link>https://purplecarrot.co.uk/2013/10/11/determining-ip-address-of-servers-out/</link><pubDate>Fri, 11 Oct 2013 16:11:00 +0100</pubDate><guid>https://purplecarrot.co.uk/2013/10/11/determining-ip-address-of-servers-out/</guid><description>
&lt;p>Nearly all enterprise x86 servers include an &lt;a href="http://en.wikipedia.org/wiki/Out-of-band_management">out-of-band management interface&lt;/a> such as &lt;a href="http://en.wikipedia.org/wiki/HP_Integrated_Lights-Out">HP iLO&lt;/a>, &lt;a href="http://en.wikipedia.org/wiki/IBM_Remote_Supervisor_Adapter">IBM RSA&lt;/a> or &lt;a href="http://en.wikipedia.org/wiki/Baseboard_Management_Controller#Baseboard_management_controller">BMC&lt;/a>, &lt;a href="http://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface">IPMI&lt;/a>, Dell DRAC, etc. These are used for remotely power cycling, monitoring and what the data centre ops guys, confusingly for me, call KVM access (that's Keyboard Video Mouse not Kernel Virtual Machine!)&lt;/p>
&lt;p>As shown in {{ site.baseurl }}{% post_url 2013-10-11-configuring-out-of-band-management %}
this post, finding out the IP of the Out-of-Band Management interface from the &amp;quot;in-band&amp;quot; server is at times very useful. Here is the quick reference way to find that out from the Linux command line for popular OOBs:&lt;/p>
&lt;p>&lt;strong>HP iLO&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="ln">1&lt;/span>hpserver:~# hponcfg -a -w ilosettings.xml
&lt;span class="ln">2&lt;/span>HP Lights-Out Online Configuration utility
&lt;span class="ln">3&lt;/span>Version 4.0.0 Date 12/08/2011 &lt;span class="o">(&lt;/span>c&lt;span class="o">)&lt;/span> Hewlett-Packard Company, &lt;span class="m">2011&lt;/span>
&lt;span class="ln">4&lt;/span>Firmware &lt;span class="nv">Revision&lt;/span> &lt;span class="o">=&lt;/span> 1.29 Device &lt;span class="nb">type&lt;/span> &lt;span class="o">=&lt;/span> iLO &lt;span class="m">2&lt;/span> Driver &lt;span class="nv">name&lt;/span> &lt;span class="o">=&lt;/span> hpilo
&lt;span class="ln">5&lt;/span>Management Processor configuration is successfully written to file &lt;span class="s2">&amp;#34;ilosettings.xml&amp;#34;&lt;/span>
&lt;span class="ln">6&lt;/span>hpserver:~# grep &lt;span class="s2">&amp;#34;&amp;lt;IP_ADDRESS VALUE&amp;#34;&lt;/span> ilosettings.xml
&lt;span class="ln">7&lt;/span> &amp;lt;IP_ADDRESS &lt;span class="nv">VALUE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;192.168.1.1&amp;#34;&lt;/span>&amp;gt;
&lt;span class="ln">8&lt;/span>hpserver:~#
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>IPMI&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="ln"> 1&lt;/span>ipmiserver# ipmitool -I open lan print &lt;span class="m">1&lt;/span>
&lt;span class="ln"> 2&lt;/span>Set in Progress : Set Complete
&lt;span class="ln"> 3&lt;/span>Auth Type Support : NONE MD2 MD5 PASSWORD
&lt;span class="ln"> 4&lt;/span>Auth Type Enable : Callback :
&lt;span class="ln"> 5&lt;/span> : User : MD2 MD5 PASSWORD
&lt;span class="ln"> 6&lt;/span> : Operator : MD2 MD5 PASSWORD
&lt;span class="ln"> 7&lt;/span> : Admin : MD5
&lt;span class="ln"> 8&lt;/span> : OEM :
&lt;span class="ln"> 9&lt;/span>IP Address Source : Static Address
&lt;span class="ln">10&lt;/span>IP Address : 192.168.1.1
&lt;span class="ln">11&lt;/span>Subnet Mask : 255.255.255.0
&lt;span class="ln">12&lt;/span>MAC Address : 00:00:00:00:00:00
&lt;span class="ln">13&lt;/span>SNMP Community String : public
&lt;span class="ln">14&lt;/span>IP Header : &lt;span class="nv">TTL&lt;/span>&lt;span class="o">=&lt;/span>0x40 &lt;span class="nv">Flags&lt;/span>&lt;span class="o">=&lt;/span>0x40 &lt;span class="nv">Precedence&lt;/span>&lt;span class="o">=&lt;/span>0x00 &lt;span class="nv">TOS&lt;/span>&lt;span class="o">=&lt;/span>0x10
&lt;span class="ln">15&lt;/span>BMC ARP Control : ARP Responses Enabled, Gratuitous ARP Disabled
&lt;span class="ln">16&lt;/span>Gratituous ARP Intrvl : 2.0 seconds
&lt;span class="ln">17&lt;/span>Default Gateway IP : 192.168.1.254
&lt;span class="ln">18&lt;/span>Default Gateway MAC : 00:00:00:00:00:00
&lt;span class="ln">19&lt;/span>Backup Gateway IP : 0.0.0.0
&lt;span class="ln">20&lt;/span>Backup Gateway MAC : 00:00:00:00:00:00
&lt;span class="ln">21&lt;/span>802.1q VLAN ID : Disabled
&lt;span class="ln">22&lt;/span>802.1q VLAN Priority : &lt;span class="m">0&lt;/span>
&lt;span class="ln">23&lt;/span>RMCP+ Cipher Suites : 0,1,2,3,4
&lt;span class="ln">24&lt;/span>Cipher Suite Priv Max : XaaaaXXXXXXXXXX
&lt;span class="ln">25&lt;/span> : &lt;span class="nv">X&lt;/span>&lt;span class="o">=&lt;/span>Cipher Suite Unused
&lt;span class="ln">26&lt;/span> : &lt;span class="nv">c&lt;/span>&lt;span class="o">=&lt;/span>CALLBACK
&lt;span class="ln">27&lt;/span> : &lt;span class="nv">u&lt;/span>&lt;span class="o">=&lt;/span>USER
&lt;span class="ln">28&lt;/span> : &lt;span class="nv">o&lt;/span>&lt;span class="o">=&lt;/span>OPERATOR
&lt;span class="ln">29&lt;/span> : &lt;span class="nv">a&lt;/span>&lt;span class="o">=&lt;/span>ADMIN
&lt;span class="ln">30&lt;/span> : &lt;span class="nv">O&lt;/span>&lt;span class="o">=&lt;/span>OEM
&lt;span class="ln">31&lt;/span>ipmiserver#
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>